다음 주의사항과 요구사항을 따르는 AI 에이전트 파이프라인을 기획하라.

작업을 시작하기전에 먼저 주의사항/요구사항을 완전히 이해하고, 제대로 이해한 것이 맞는지 방향성 등에 대해서 모호한 부분이 있다면 내게 최대 4개까지 질문하세요. 각 질문은 Recommend 옵션, 기타 옵션을 포함하여 3개 정도의 선택지를 제공하세요.

결과에는 다음 사항들이 반드시 포함되어야한다.

- step-by-step으로 필요한 정보들과, 해당 정보를 추출하기위한 데이터 pre-processing, post-processing

- agent들의 관계 및 역할

주의사항은 다음과 같다.

- 너무 큰 데이터를 AI에게 그대로 맡기면, context size를 과하게 소모해 큰 비용이 발생하고 정확도도 떨어질 수 있다. step-by-step으로 필요한 정보를 추출하되, 해당 정보를 추출하는데 필요하지 않은 데이터는 code-level에서 python script 등으로 적절히 제거한 뒤 전달하는 편이 좋다.

- 데이터의 연관관계도 code-level에서 compute할 수 있는 것들은 가능한 미리 처리해서 전달하는 편이 좋다.

- 이미지 리소스도 정확히 다운로드해야하며, placeholder도 모두 추출해야한다.

claude code를 사용할 것이다. master agent가 전체 작업흐름을 담당하고, context 소모가 큰 하위 작업을 sub agent에게 위임한다.

요구사항:
- 현재 프로젝트에 특정 feature를 구현하거나 수정 작업을 진행하기 위해 github issue를 발행합니다.
- /spec-loader를 활용하여 이 issue를 통해 수정하고자 하는 작업이 무엇인지 정확한 맥락을 파악하십시오.
- 작업 규모를 고려하여 800줄 이하의 Pull Request가 하나의 issue에 할당될 수 있도록, 필요에 따라 여러 개의 issue로 분리하여 생성하십시오.
- 사용자의 요구사항을 issue에 등록할때 아래 사항을 참고하십시오.
### Step 1: 이슈 분석

다음 항목을 분석한다:
1. 이슈가 해결하려는 핵심 문제
2. 현재 코드베이스 상태 (Grep, Glob으로 탐색)
3. 필요한 변경 범위
4. 잠재적 리스크

### Step 2: 사용자 확인

AskUserQuestion으로 의사결정이 필요한 사항 질문 (최대 4개):

```
예시 질문:
- "이 기능은 A 방식과 B 방식 중 어느 것으로 구현할까요?"
- "에러 처리는 어느 수준까지 필요한가요?"
- "기존 API를 변경해도 될까요, 새 API를 추가할까요?"
```

### Step 3: 계획서 작성

아래를 포함하여 issue template에 맞춰 github issue에 문서를 업로드 한다.

필수 포함 항목:
- 문제 정의
- 해결 방안 (의사결정 사항 포함)
- 영향받는 파일 목록
- 테스트 전략 (edge case 위주, approval case 1개 이상)
- 작업 체크리스트

# Issue #{issue_number} 해결 계획서

> 생성일: {date}
> 이슈: [{title}]({url})

## 1. 문제 정의

### 1.1 현재 상황
{현재 시스템의 상태 또는 문제 상황 설명}

### 1.2 해결하고자 하는 문제
{이슈가 해결하려는 핵심 문제}

### 1.3 기대 결과
{이슈가 완료되면 얻을 수 있는 결과}

## 2. 해결 방안

### 2.1 접근 방식
{선택한 해결 방식과 그 이유}

### 2.2 구현 세부사항
{구체적인 구현 방법}

### 2.3 의사결정 사항
| 항목 | 결정 내용 | 이유 |
|------|----------|------|
| {decision_1} | {choice_1} | {reason_1} |

## 3. 영향받는 파일

### 3.1 수정 대상
| 파일 경로 | 변경 내용 |
|----------|----------|
| {file_path_1} | {change_description_1} |

### 3.2 신규 생성
| 파일 경로 | 용도 |
|----------|------|
| {new_file_1} | {purpose_1} |

## 4. 테스트 전략

### 4.1 테스트 범위
{테스트할 범위와 우선순위}

### 4.2 테스트 케이스
| 케이스 | 타입 | 설명 |
|--------|------|------|
| {test_1} | approval | {description_1} |
| {test_2} | edge_case | {description_2} |

### 4.3 테스트 파일
| 파일 경로 | 테스트 대상 |
|----------|------------|
| {test_file_1} | {target_1} |

## 5. 작업 체크리스트

- [ ] Phase 1: {첫 번째 작업 그룹}
  - [ ] {task_1}
  - [ ] {task_2}
- [ ] Phase 2: {두 번째 작업 그룹}
  - [ ] {task_3}

## 6. 관련 문서

- spec 문서: {참조한 spec 문서 목록}
- 관련 이슈: {연관된 이슈 번호}
